let e,r,t,o,i,n,s,l,a,d,u;function p(e,r,t,o){Object.defineProperty(e,r,{get:t,set:o,enumerable:!0,configurable:!0})}var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},w={},f={},c=g.parcelRequire6c98;null==c&&((c=function(e){if(e in w)return w[e].exports;if(e in f){var r=f[e];delete f[e];var t={id:e,exports:{}};return w[e]=t,r.call(t.exports,t,t.exports),t.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){f[e]=r},g.parcelRequire6c98=c),c.register("27Lyk",function(e,r){p(e.exports,"register",()=>t,e=>t=e),p(e.exports,"resolve",()=>o,e=>o=e);var t,o,i={};t=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)i[r[t]]=e[r[t]]},o=function(e){var r=i[e];if(null==r)throw Error("Could not resolve bundle with id "+e);return r}}),c("27Lyk").register(JSON.parse('{"8QGS7":"silhouetteProjection.b08c1309.js","82ikj":"silhouetteAsync.worker.f555f2b4.js","2No9X":"projectionAsync.worker.ec9487bb.js","cenjB":"silhouetteProjection.bfa2daf3.js"}'));var y=c("ilwiq"),m=c("jiuw3"),h=c("5Rd1x"),b=c("7ePFa"),x=c("4CEV9"),y=c("ilwiq");const v="SilhouetteGeneratorWorker";var k={},M={};M=function(e,r,t){if(r===self.location.origin)return e;var o=t?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([o],{type:"application/javascript"}))};let W=new URL(c("27Lyk").resolve("82ikj"),import.meta.url);k=M(W.toString(),W.origin,!0);class O{constructor(){this.running=!1,this.worker=new Worker(k),this.worker.onerror=e=>{if(e.message)throw Error(`${v}: Could not create Web Worker with error "${e.message}"`);throw Error(`${v}: Could not create Web Worker.`)}}generate(e,r={}){if(this.running)throw Error(`${v}: Already running job.`);if(null===this.worker)throw Error(`${v}: Worker has been disposed.`);let{worker:t}=this;return this.running=!0,new Promise((o,i)=>{t.onerror=e=>{i(Error(`${v}: ${e.message}`)),this.running=!1},t.onmessage=e=>{this.running=!1;let{data:n}=e;if(n.error)i(Error(n.error)),t.onmessage=null;else if(n.result){let e=new y.BufferGeometry;e.setAttribute("position",new y.BufferAttribute(n.result.position,3,!1)),e.setIndex(new y.BufferAttribute(n.result.index,1,!1)),o(e),t.onmessage=null}else r.onProgress&&r.onProgress(n.progress)};let n=e.index?e.index.array.slice():null,s=e.attributes.position.array.slice(),l=[s.buffer];n&&l.push(n.buffer),t.postMessage({index:n,position:s,options:{...r,onProgress:null,includedProgressCallback:!!r.onProgress}},l)})}dispose(){this.worker.terminate(),this.worker=null}}const S={displaySilhouette:!0,displayWireframe:!1,displayOutline:!1,displayModel:!0,useWorker:!1,rotate:()=>{l.quaternion.random(),l.position.set(0,0,0),l.updateMatrixWorld(!0);let e=new y.Box3;e.setFromObject(i,!0),e.getCenter(l.position).multiplyScalar(-1),l.position.y=Math.max(0,-e.min.y)+1},regenerate:()=>{j=P()}};let j=null;function*P(e=30){d.innerText="processing: --";let r=window.performance.now(),t=[];i.updateWorldMatrix(!0,!0),i.traverse(e=>{if(e.geometry){let r=e.geometry.clone();for(let t in r.applyMatrix4(e.matrixWorld),r.attributes)"position"!==t&&r.deleteAttribute(t);t.push(r)}});let o=(0,b.mergeGeometries)(t,!1),l=window.performance.now()-r;yield,r=window.performance.now();let p=null;if(S.useWorker)for(u.generate(o,{onProgress:e=>{d.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`}}).then(e=>{p=e});null===p;)yield;else{let r=new x.SilhouetteGenerator;r.iterationTime=e,r.output=2;let t=r.generate(o,{onProgress:(e,r)=>{d.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`;let t=r.getGeometry();n.geometry.dispose(),n.geometry=t[0],s.geometry=t[0],a.geometry.dispose(),a.geometry=t[1],(S.displaySilhouette||S.displayWireframe||S.displayOutline)&&(n.geometry.dispose(),n.geometry=t[0],s.geometry=t[0],a.geometry.dispose(),a.geometry=t[1])}}),i=t.next();for(;!i.done;)i=t.next(),yield;p=i.value}let g=window.performance.now()-r;n.geometry.dispose(),n.geometry=p[0],s.geometry=p[0],a.geometry.dispose(),a.geometry=p[1],d.innerText=`merge geometry  : ${l.toFixed(2)}ms
edge trimming   : ${g.toFixed(2)}ms
triangles       : ${n.geometry.index.count/3} tris`}!async function(){d=document.getElementById("output"),(e=new y.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(15658734,1),document.body.appendChild(e.domElement),t=new y.Scene;let p=new y.DirectionalLight(16777215,3.5);p.position.set(1,2,3),t.add(p);let g=new y.AmbientLight(11583173,.5);t.add(g),(l=new y.Group).position.y=2,t.add(l),(i=new y.Mesh(new y.TorusKnotGeometry(1,.4,120,30),new y.MeshStandardMaterial({polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}))).rotation.set(Math.PI/4,0,Math.PI/8),l.add(i),(n=new y.Mesh(void 0,new y.MeshBasicMaterial({color:15753874,side:y.DoubleSide,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}))).position.y=-2,t.add(n),(a=new y.LineSegments(void 0,new y.LineBasicMaterial({color:0}))).position.y=-2,t.add(a),(s=new y.Mesh(void 0,new y.MeshBasicMaterial({color:12720219,wireframe:!0}))).position.y=-2,t.add(s),(r=new y.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,50)).position.setScalar(4.5),r.updateProjectionMatrix(),new h.OrbitControls(r,e.domElement),(o=new m.GUI).add(S,"displayModel"),o.add(S,"displaySilhouette"),o.add(S,"displayOutline"),o.add(S,"displayWireframe"),o.add(S,"useWorker"),o.add(S,"rotate"),o.add(S,"regenerate"),u=new O,j=P(),function o(){if(requestAnimationFrame(o),j){let e=j.next();e.done&&(j=null)}i.visible=S.displayModel,n.visible=S.displaySilhouette,s.visible=S.displayWireframe,a.visible=S.displayOutline,e.render(t,r)}(),window.addEventListener("resize",function(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)},!1)}();
//# sourceMappingURL=silhouetteProjection.b08c1309.js.map
